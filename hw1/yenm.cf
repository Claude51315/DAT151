comment  "//" ; 
comment  "/*" "*/" ;
comment  "#" ; 

position token Id ( (letter | '_') (letter | digit | '_')*) ;

PDefs. Program ::= [Def] ; 
Statements. Def ::= Stm ;


SUsing. Def ::= "using" QC ";"; 
{- definitions of Expression-}
SExpr.              Stm  ::= Exp ";" ; 
Ethrow.             Exp  ::= "throw" Exp1 ; 
Econditional.       Exp2 ::= Exp3 "?" Exp2 ":" Exp2 ; 
EAssignment.        Exp2 ::= Exp3 "=" Exp2 ; 
EPlusAssignment.    Exp2 ::= Exp3 "+=" Exp2 ; 
EMinusAssignment.   Exp2 ::= Exp3 "-=" Exp2 ; 

EDisjuction.        Exp3 ::= Exp3 "||" Exp4 ; 
EConsjunction.      Exp4 ::= Exp4 "&&" Exp5 ; 

EEquality.          Exp8 ::= Exp8 "==" Exp9 ; 
EInequality.        Exp8 ::= Exp8 "!=" Exp9;

EGreater.           Exp9 ::= Exp9 ">"  Exp10; 
EGreaterEqual.      Exp9 ::= Exp9 ">=" Exp10; 
ELess.              Exp9 ::= Exp9 "<"  Exp10; 
ELessEqual.         Exp9 ::= Exp9 "<=" Exp10; 

ELeftShift.         Exp10 ::= Exp10 "<<" Exp11 ; 
ERightShift.        Exp10 ::= Exp10 ">>" Exp11 ;

EAdd.               Exp11 ::= Exp11 "+" Exp12;
ESub.               Exp11 ::= Exp11 "-" Exp12;

EMul.               Exp12 ::= Exp12 "*" Exp13;
EDiv.               Exp12 ::= Exp12 "/" Exp13;
Emod.               Exp12 ::= Exp12 "%" Exp13;

EPreIncr.           Exp13 ::= "++" Exp14 ; 
EPreDecr.           Exp13 ::= "--" Exp14; 
EDereference.       Exp13 ::= "*" Id ; 
ENegation.          Exp13 ::= "!" Exp14; 

EDot.               Exp14 ::= Exp14 "." Exp15; 
EArrow.             Exp14 ::= Exp14 "->" Exp15; 
EPostIncr.          Exp14 ::= Exp15 "++" ; 
EPostDecr.          Exp14 ::= Exp15 "--" ;  

EFunctionCall.      Exp15 ::= Id "(" [Exp] ")" ;
EIndexing.          Exp15 ::= Id "[" Exp "]" ;

EForLoopDecal.      Exp16 ::= Type Literals ; 
Literal.            Exp16 ::= Literals ;

coercions Exp 16 ;
separator Exp "," ; 

{- definition of literals-}
LInt.               Literals ::= Integer ; 
LChar.              Literals ::= Char ; 
LDouble.            Literals ::= Double; 
LString.            Literals ::= String ; 
LId.                Literals ::= Id ; 
LTrue.              Literals ::= "true" ;
LFalse.             Literals ::= "false";
LQC.                Literals ::= QC ; 

{- Declarations -}
SDecl.              Stm ::= Type Id ";";
SDecls.             Stm ::= Type Id "," [Id] ";" ; 
SDeclInit.          Stm ::= Type Id "=" Exp ";" ;

separator Id "," ; 

{-
DeclarationPrefix. Stm ::= DPrefix Type [DList] ";" ; 
separator DList "," ; 
DObj. DList ::= Id ;
DobjInit. DList ::= Id "=" Exp ;  
DPreInline. DPrefix ::= "inline" ;
DPreTypedef. DPrefix ::= "typedef" ;
DPreConst. DPrefix ::= "const" ;
-}

{- Types -}
TRef.               Type ::= Type "&" ; 
TPrefix.            Type ::= Prefix Type; 
TInt.               Type ::= "int" ; 
TChar.              Type ::= "char"; 
TVoid.              Type ::= "void"; 
TDouble.            Type ::= "double" ; 
TId.                Type ::= Id;
TTemplate.          Type ::= Id "<" Type ">";
TTemplateList.      Type ::= Id "<" Type "," [Type] ">" ; 
separator Type "," ; 
TQC.                Type ::= QC; 

PrefixConst.        Prefix ::= "const";
PrefixTypedef.      Prefix ::= "typedef";
PrefixInline.       Prefix ::= "inline" ;

{- Return Value -}
SReturn.            Stm ::=  "return" Exp ";" ;


{- cout & cin   -}
{-
SStdCout.           Stm ::= QC     "<<" [ExpOutList] ";" ; 
SCout.              Stm ::= "cout" "<<" [ExpOutList] ";" ;
separator ExpOutList "<<" ;
OutListExp.         ExpOutList ::= Exp ;
OutListQC.          ExpOutList ::= QC ; 

SStdCin.            Stm ::= QC    ">>" [InList] ";" ; 
SCin.               Stm ::= "cin" ">>" [InList] ";";
separator InList ">>" ;
InListId. InList ::= Id ; 
-}


QualifiedConst. QC ::= QCObj "::" [QCObj] ; 
separator QCObj "::" ; 
QCObj. QCObj ::= Id ;
QCObjTemplate. QCObj ::= Id "<" Type ">" ; 

{- Function Declaration -}
DFun.               Def ::= Type Id "(" [Arg] ")" "{" [Stm] "}" ; 
DFunHeader.         Def ::= Type Id "(" [Arg] ")" ";" ; 
separator Arg "," ;
ADecl.              Arg ::=  Type Id;  
ADeclType.          Arg ::=  Type ;
ADeclRefType.       Arg ::=  Type "&" ;
ADeclRef.           Arg ::=  Type "&" Id ;  

{-
ADeclPrefix. Arg ::= DPrefix Type Id ; 
ADeclPrefixRef. Arg ::= DPrefix Type "&" Id ;
-}

SWhile.             Stm ::= "while" "(" Exp ")" Stm ; 
SDoWhile.           Stm ::= "do" Stm "while" "(" Exp ")" ";" ; 
SFor.               Stm ::= "for" "(" Exp ";"  Exp ";" Exp ")" Stm ; 
SIf.                Stm ::= "if" "(" Exp ")" Stm ; 
SIfElse.            Stm ::= "if" "(" Exp ")" Stm "else" Stm ; 
SBlock.             Stm ::= "{" [Stm] "}" ; 


terminator Stm "" ;
terminator Def "" ; 


